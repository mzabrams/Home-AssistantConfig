- id: power_cycle_wled_daily
  alias: Power cycle WLED daily
  trigger:
  - platform: time
    at: 04:00:00
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: light.wled_dresser
      state: 'off'
    - condition: state
      entity_id: light.wled_bed
      state: 'off'
    - condition: state
      entity_id: light.wled_nightstand_left
      state: 'off'
    - condition: state
      entity_id: light.wled_nightstand_right
      state: 'off'
  - condition: or
    conditions:
    - condition: template
      value_template: '{{ ( as_timestamp(now()) - as_timestamp(state_attr(''automation.power_cycle_wled_daily'',
        ''last_triggered'')) |int(0) ) > 144000 }}'
  action:
  - service: rest_command.wled_bed_reboot
  - service: rest_command.wled_dresser_reboot
  - service: rest_command.wled_nightstand_left_reboot
  - service: rest_command.wled_nightstand_right_reboot
  mode: single
